# 音频播放器 (Audio Player)

一个基于原生 HTML、CSS 和 JavaScript 构建的现代化音频播放器应用，采用模块化设计，具有水墨风格的用户界面。

## 项目特点

- 🎵 本地音乐播放支持
- 🎵 在线音乐播放支持（第三方 API）
- 🎨 中国风水墨设计风格
- 📱 响应式布局，适配移动端
- 🧩 模块化架构，易于扩展
- 🗃️ 本地存储支持，持久化管理音乐文件

## 功能模块

### 主要功能
1. **本地音乐管理**
   - 扫描和导入本地音频文件
   - 音乐库展示和管理
   - 支持多种音频格式 (MP3, WAV, OGG等)

2. **在线音乐浏览**
   - 音乐搜索功能
   - 分类浏览推荐
   - 第三方音乐源支持

3. **播放列表**
   - 创建和管理自定义播放列表
   - 收藏喜欢的音乐

4. **设置选项**
   - 音质选择
   - 播放模式设置
   - 界面主题配置

### 界面组件
- 顶部导航栏
- 侧边栏菜单
- 主内容区域
- 底部播放控制器

## 技术架构

### 核心技术栈
- HTML5
- CSS3 (含 Flexbox 布局)
- 原生 JavaScript (ES6+)

### 项目结构
```
audio/
├── components/          # UI 组件
│   ├── bottom-controller/
│   ├── main-content/
│   ├── sidebar/
│   └── top-nav/
├── core/               # 核心功能模块
│   ├── audio/          # 音频处理模块
│   ├── common/         # 公共工具类
│   ├── storage/        # 存储管理模块
│   └── system/         # 系统核心组件
├── modules/            # 业务功能模块
│   ├── local-music/
│   ├── online-music/
│   ├── playlists/
│   └── settings/
├── shared/             # 共享资源
│   └── css/
└── index.html          # 入口文件
```

### 核心组件

1. **FrameworkLoader** - 负责加载框架级UI组件（顶部导航、侧边栏、底部控制器等）
2. **ModuleLoader** - 负责加载业务功能模块（本地音乐、在线音乐、播放列表、设置等）
3. **AudioPlayer** - 音频播放核心功能
4. **EventBus** - 事件总线，用于模块间通信
5. **LocalResourceManager** - 本地资源管理

### 设计模式
- 模块化加载机制
- 组件化开发
- 按需加载策略
- 事件驱动架构

### 架构更新 (v1.1)
最近完成了一次重要优化，解决了模块初始化和事件绑定重复执行的问题：

1. **模块初始化优化**
   - 明确划分了模块自身初始化和UI初始化的职责
   - 统一由ModuleLoader负责调用模块的bindEvents和initializeUI方法
   - 避免了在模块构造函数和加载器中重复执行初始化逻辑

2. **事件处理规范化**
   - 每个模块只负责定义事件处理逻辑
   - 事件绑定由统一的加载器处理
   - 避免了事件重复绑定导致的多次执行问题

3. **目录结构调整**
   - `core/ui/` 重命名为 `core/system/`
   - `core/util/` 重命名为 `core/common/`

## 第三方 API 使用说明

本项目在线音乐功能使用了第三方音乐 API 服务：

### GD音乐API
- **API 提供方**: GD Studio (music-api.gdstudio.xyz)
- **使用场景**: 
  - 在线音乐搜索
  - 获取歌曲播放链接
  - 获取专辑图片
  - 获取歌词信息
- **支持的音乐源**:
  - 多种主流音乐平台
- **API 调用示例**:
  ```javascript
  // 搜索音乐
  const response = await fetch(`${this.apiBase}?types=search&source=音乐源标识&name=歌曲名&count=20&pages=1`);
  
  // 获取歌曲链接
  const response = await fetch(`${this.apiBase}?types=url&source=音乐源标识&id=歌曲ID&br=320`);
  ```

> ⚠️ 注意：使用第三方 API 时请遵守 API 提供方的使用条款和限制。本项目仅用于学习和参考目的，不适用于商业用途。

## 使用说明

1. 克隆或下载项目代码
2. 在现代浏览器中打开 `index.html` 文件
3. 开始使用音频播放器

注意：由于浏览器安全限制，某些功能（如文件读取）在本地文件协议（file://）下可能无法正常工作，建议通过 HTTP 服务器运行。

## 开发指南

### 添加新功能模块
1. 在 `modules/` 目录下创建新模块文件夹
2. 创建模块的 HTML、CSS 和 JS 文件
3. 确保模块导出遵循统一规范（默认导出和命名导出）
4. 更新侧边栏导航链接

### 自定义样式
项目采用 CSS 变量和模块化样式管理，可以在 `shared/css/` 目录下找到全局样式定义。

## 浏览器兼容性

- Chrome 60+
- Firefox 55+
- Safari 12+
- Edge 79+

## 许可证

本项目仅供学习交流使用。

## 项目状态

此项目为演示项目，部分功能（如在线音乐）需要进一步实现后端接口支持。最新版本已完成模块系统优化和组件解耦，采用了事件驱动架构，为后续功能扩展奠定了良好的基础.