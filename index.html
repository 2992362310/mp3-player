<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audio Player</title>
    <link rel="stylesheet" href="shared/css/style.css">
    <link rel="icon" type="image/png" href="data:image/png;base64,iVBORw">
</head>
<body>
    <!-- 顶部导航 -->
    <header data-module="./components/top-nav/top-nav.html"></header>
    
    <div class="main-container">
        <!-- 侧边栏 -->
        <aside data-module="./components/sidebar/sidebar.html"></aside>
        
        <!-- 右侧主要内容区域 -->
        <div class="content-wrapper">
            <!-- 主内容区域 -->
            <main class="main-content" data-module="./components/main-content/main-content.html"></main>
            
            <!-- 底部控制器 -->
            <footer data-module="./components/bottom-controller/bottom-controller.html"></footer>
        </div>
    </div>
    
    <!-- 按依赖顺序加载脚本 -->
    <script type="module" src="core/ui/EventBus.js"></script>
    <script type="module" src="core/ui/ModuleLoader.js"></script>
    <script type="module" src="core/ui/DOMManager.js"></script>
    <script type="module" src="core/storage/LocalResourceManager.js"></script>
    <script type="module" src="core/ui/UIComponents.js"></script>
    <script type="module" src="core/audio/AudioPlayer.js"></script>
    
    <script type="module">
        // 初始化应用
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                // 初始化模块加载器（假设它已通过script标签加载并挂载到window对象）
                if (window.ModuleLoader) {
                    await window.ModuleLoader.init();
                }
                
                // 初始化UI组件
                if (window.UIComponents) {
                    window.uiComponents = new window.UIComponents();
                    await window.uiComponents.delayInitialize();
                }
                
                // 初始化音频播放器
                if (window.AudioPlayer) {
                    window.audioPlayer = new window.AudioPlayer();
                    await window.audioPlayer.init();
                }
                
                console.log('应用初始化完成');
            } catch (error) {
                console.error('应用初始化失败:', error);
            }
        });
    </script>
</body>
</html>